---
version: v1alpha1
debug: false
persist: true
machine:
  type: controlplane
  token: s8hrm0.9zpaek46344c7wy7
  ca:
    crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJQakNCOGFBREFnRUNBaEF1VWhVNG92OEtWczlRT0dMWHg0YzNNQVVHQXl0bGNEQVFNUTR3REFZRFZRUUsKRXdWMFlXeHZjekFlRncweU5UQTFNekV3TURFNE1qWmFGdzB6TlRBMU1qa3dNREU0TWpaYU1CQXhEakFNQmdOVgpCQW9UQlhSaGJHOXpNQ293QlFZREsyVndBeUVBTldVWXNxeVFBTmxJcGNGWm84VDF3VEFGQ0pvTWZ0eStPU2lQCjh1NERFS3FqWVRCZk1BNEdBMVVkRHdFQi93UUVBd0lDaERBZEJnTlZIU1VFRmpBVUJnZ3JCZ0VGQlFjREFRWUkKS3dZQkJRVUhBd0l3RHdZRFZSMFRBUUgvQkFVd0F3RUIvekFkQmdOVkhRNEVGZ1FVU0RBRVlEeTVTZ0daUWVragpPT29sM1BQWDZtb3dCUVlESzJWd0EwRUFYczhwTnRnOFBwbk00b29KYzdZdnF4UHE2MHFDaDF4V1VnSkVvNzZWCjRCeUJCMDdpYkI4N01LL2RCaWpZeDI1aXFiQ3FQOXNUbFE0cXJ5YjRSNDYzREE9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    key: LS0tLS1CRUdJTiBFRDI1NTE5IFBSSVZBVEUgS0VZLS0tLS0KTUM0Q0FRQXdCUVlESzJWd0JDSUVJRzJ6amdTZmduSC9qWFFhUWNJbFA2YVhXQ3QrNy9UOEhoMGJrRStDTnU0RQotLS0tLUVORCBFRDI1NTE5IFBSSVZBVEUgS0VZLS0tLS0K
  certSANs:
    - 127.0.0.1
    - 192.168.40.20
  kubelet:
    image: ghcr.io/siderolabs/kubelet:v1.34.3
    extraConfig:
      serializeImagePulls: false
    defaultRuntimeSeccompProfileEnabled: true
    nodeIP:
      validSubnets:
        - 192.168.40.0/24
    disableManifestsDirectory: true
  network:
    hostname: homeops-controller-02
    interfaces:
      - interface: ens18
        addresses:
          - 192.168.40.26/24
        routes:
          - network: 0.0.0.0/0
            gateway: 192.168.40.1
        vlans:
          - routes: []
            dhcp: false
            vlanId: 90
            mtu: 1500
        mtu: 1500
        dhcp: false
        vip:
          ip: 192.168.40.20
    nameservers:
      - 1.1.1.1
      - 8.8.8.8
    disableSearchDomain: true
  install:
    disk: /dev/vda
    image: 73b5a3836a6b8f63eae6605a4b68428cf75b6c806d9fb65f5d2a17ab06e13ad7:v1.11.6
    wipe: false
  files:
    - content: |-
        [plugins."io.containerd.cri.v1.images"]
          discard_unpacked_layers = false
        [plugins."io.containerd.cri.v1.runtime"]
          device_ownership_from_security_context = true
      permissions: 0o0
      path: /etc/cri/conf.d/20-customization.part
      op: create
  time:
    disabled: false
    servers:
      - 162.159.200.1
      - 162.159.200.123
  sysctls:
    fs.inotify.max_user_instances: "8192"
    fs.inotify.max_user_watches: "1048576"
    net.core.default_qdisc: fq
    net.core.rmem_max: "67108864"
    net.core.wmem_max: "67108864"
    net.ipv4.neigh.default.gc_thresh1: "4096"
    net.ipv4.neigh.default.gc_thresh2: "8192"
    net.ipv4.neigh.default.gc_thresh3: "16384"
    net.ipv4.tcp_congestion_control: bbr
    net.ipv4.tcp_fastopen: "3"
    net.ipv4.tcp_mtu_probing: "1"
    net.ipv4.tcp_rmem: 4096 87380 33554432
    net.ipv4.tcp_window_scaling: "1"
    net.ipv4.tcp_wmem: 4096 65536 33554432
    sunrpc.tcp_max_slot_table_entries: "128"
    sunrpc.tcp_slot_table_entries: "128"
    user.max_user_namespaces: "11255"
    vm.nr_hugepages: "1024"
  features:
    rbac: true
    stableHostname: true
    kubernetesTalosAPIAccess:
      enabled: true
      allowedRoles:
        - os:admin
      allowedKubernetesNamespaces:
        - system-upgrade
        - actions-runner-system
    apidCheckExtKeyUsage: true
    diskQuotaSupport: true
    kubePrism:
      enabled: true
      port: 7445
    hostDNS:
      enabled: true
      forwardKubeDNSToHost: true
  nodeLabels:
    node.kubernetes.io/exclude-from-external-load-balancers: ""
cluster:
  id: 8OCjFvrj3XHWlf_j1p1xK6AsEdDkr4gtnGNOIfVM7Uk=
  secret: hUlr/Er9WK4CesXZk5C/efPY1y3rpUre31WaPuVKLiQ=
  controlPlane:
    endpoint: https://192.168.40.20:6443
  clusterName: kubernetes
  network:
    cni:
      name: none
    dnsDomain: cluster.local
    podSubnets:
      - 10.42.0.0/16
    serviceSubnets:
      - 10.43.0.0/16
  token: 7gcmrs.zvfgfvxjd550b63v
  secretboxEncryptionSecret: JTKGy4JcrIThfjnyArb8fJM6XjCfYVO/rYnYmB66n98=
  ca:
    crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJpekNDQVRDZ0F3SUJBZ0lSQU4vSXBkWXFpbEpYT2tzd0ZFeUdSZjB3Q2dZSUtvWkl6ajBFQXdJd0ZURVQKTUJFR0ExVUVDaE1LYTNWaVpYSnVaWFJsY3pBZUZ3MHlOVEExTXpFd01ERTRNalZhRncwek5UQTFNamt3TURFNApNalZhTUJVeEV6QVJCZ05WQkFvVENtdDFZbVZ5Ym1WMFpYTXdXVEFUQmdjcWhrak9QUUlCQmdncWhrak9QUU1CCkJ3TkNBQVRHRmR1aDRtSnlJY3VHdFBaM2l6UXErRks0bnpNK1lZcURkcHh1M3NVSnZDbTNwYWNneW5tZWRpYlgKdytTWk9iMUE3cHpvNnloMXZlM01aZWxzRUVnaG8yRXdYekFPQmdOVkhROEJBZjhFQkFNQ0FvUXdIUVlEVlIwbApCQll3RkFZSUt3WUJCUVVIQXdFR0NDc0dBUVVGQndNQ01BOEdBMVVkRXdFQi93UUZNQU1CQWY4d0hRWURWUjBPCkJCWUVGRkg0VlZ0Vk1ycmNFNUVpVStIRG9ZUGhpeUlSTUFvR0NDcUdTTTQ5QkFNQ0Ewa0FNRVlDSVFEUnFkSkoKU0xCWnd4YTd2N0FCZkRJSkJMUjlKdDRBdXpNTHRtdVdocEtLL2dJaEFKS2JYMjYzT0wzTzVJbklmSXJUcmJ6agpiNVNFTkh0TTUwbUdLaVpzaG5qbQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    key: LS0tLS1CRUdJTiBFQyBQUklWQVRFIEtFWS0tLS0tCk1IY0NBUUVFSU94aThmVzZpckhyMUQ4SmdoRkJUOENQeVBlenlFM1hGVXNudmZmcGpadHRvQW9HQ0NxR1NNNDkKQXdFSG9VUURRZ0FFeGhYYm9lSmljaUhMaHJUMmQ0czBLdmhTdUo4elBtR0tnM2FjYnQ3RkNid3B0NlduSU1wNQpublltMThQa21UbTlRTzZjNk9zb2RiM3R6R1hwYkJCSUlRPT0KLS0tLS1FTkQgRUMgUFJJVkFURSBLRVktLS0tLQo=
  aggregatorCA:
    crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJYekNDQVFhZ0F3SUJBZ0lSQUpEejVBUXcrSEdqT3hKbEZDQlFVbEV3Q2dZSUtvWkl6ajBFQXdJd0FEQWUKRncweU5UQTFNekV3TURFNE1qVmFGdzB6TlRBMU1qa3dNREU0TWpWYU1BQXdXVEFUQmdjcWhrak9QUUlCQmdncQpoa2pPUFFNQkJ3TkNBQVJaRmZKVUNaQy84OVBObXpCQ0I5aTBnbWFLMmROMnAxeFJRcERLaitQTUF6bkV3d1E0CmFKVitPL3owQURhSFU4WTlHTm45cmhCMGZyald2WWF0R3p3SW8yRXdYekFPQmdOVkhROEJBZjhFQkFNQ0FvUXcKSFFZRFZSMGxCQll3RkFZSUt3WUJCUVVIQXdFR0NDc0dBUVVGQndNQ01BOEdBMVVkRXdFQi93UUZNQU1CQWY4dwpIUVlEVlIwT0JCWUVGREtPUTlLM3ZaZHJMNFp4eTlZbmpBa0dxKy9ITUFvR0NDcUdTTTQ5QkFNQ0EwY0FNRVFDCklGNVFxUzQzSjF5dDRIWWJ4ZzJHaDZobVg4US9mZlNEUlJzTkw3YU1aYmREQWlBVVREKy9xMVBIeVE2dWtYN0QKZ2VTK05ydW9rRCswK1FIRWNTMlk1bVFtd2c9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    key: LS0tLS1CRUdJTiBFQyBQUklWQVRFIEtFWS0tLS0tCk1IY0NBUUVFSURFRjZQZHAwNEVQbWNIb2hMaEwzWC9VL2s3TUNKM1ZOb2xXQm1tdHgxSmdvQW9HQ0NxR1NNNDkKQXdFSG9VUURRZ0FFV1JYeVZBbVF2L1BUelpzd1FnZll0SUptaXRuVGRxZGNVVUtReW8vanpBTTV4TU1FT0dpVgpmanY4OUFBMmgxUEdQUmpaL2E0UWRINjQxcjJHclJzOENBPT0KLS0tLS1FTkQgRUMgUFJJVkFURSBLRVktLS0tLQo=
  serviceAccount:
    key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlKS0FJQkFBS0NBZ0VBeDNmaXZiOFhFMWJQb3JaWVdOTFpYN00xY1JSYVJSeG0yKzlCRGowRFIrSjZYZXRQCjEwV1I0RHRlRGNKRUpybVpxcy9aNlRobEF5bjZBWjhUWFdoZzZZT2RaMGR2bW5LYVo3VTh3OXhtTDlVdEE2dkwKV1Y5cWlhbCtNOVVRaHpKdWFnQ1ZUSCtQaGNZV3dEVDU0Q1VkL1o0TTJMNkRhZ2l6a0dzMVVQZTJQbUJDZk52bgpCajRhR0xmaGs4OEd2NWsybGYyUnp3RHQram5KRW9FVk8xVXdZSTFqbWlsdVZtYkJQZ3JGWGlsNElrUW53T1h2CnIzTTAxNVBoRnB2dDRUUzlFOEtDK2ZRcXpaVldUalJtdkVsZVU1Ni9XbThSN1I2OVh2M1lFay9BVDU4MU9SOHoKMzJlaG56SEZ6cTd2WFpDQ1F4Z0VNOHlaWUtuMkpYZFNlcWVOZEV6MkJ3MjZFN2J4Q1Rrb2d2Rytsck1jQUdMdApFRG1RM1FVaWVyMTFlMU1WMG5LMTB2UEtHMHZKeHYyaXpLcEhzNk9JUmRJWTVkc3FYRkFnYzFJUjJOQW5JaDlDCnZVNFRncFVSdzlOWEhYMFF5MDJRRjd3Rm10R3pHNVZnSDhveHRVdVp4dHNQVzllUFNlR3A5eVQ1R1phZjNiUzIKMzdnYzA4Y0puWDVnYk1QQmkrWHFVcWF2d0l2cHJjM3hTczRZSUhqeHYwRW1JZkQzQjBRRW50L1ZEY3AwUzQ3NAp6T3AzVGRSa0pzR0wvcUdzcmxMQjU2aC9tTE0vMDdNanFFVm1INTdpeWdTTTltdy9ycjhpMEV0Ri8rdy9UMmIrCmVvVVdYT3BZU1J3R3RJdE9ZcFBoZ2xTSDZPWk1JOGhkUnVnSExNTkh3VGZuQkwzNGVwS1R5OFcxQzRFQ0F3RUEKQVFLQ0FnQUpSR1pSR2gwL2gzUnIvd2hubjR1c2V1QXVMOU95RTJ2S3R2RGRBVXdMU1dBVnFCaW9jKzJ2SnhqegpmeEdoSWpVN3lxNTVTN2JETk81OTUrcnJsMzF0cWZFTW51UzJMbklDcEppbE1hS2dnU2tuU3hKdWRYeTIxcnhqCm1uZjdMUVpVMTlBMzZyTURoRUNUTjE3ZTJXQ2RZMnY5djZ1dHQrZm1Tem5SMkVGa0FGOUVhMmZPU2lFMm9lZnAKd09nRGk3SHQyZWNkNE1GZHMxUzJmcTlxcDFhQkhONktWM2VPTFhYWHpPS3VzVkxvMWlWcDdKRGtSQkFwM2grcQplQTMvTFI3bCthN3h2NVNqd3FiODZRbTNJSnBBbks3dm05cVBpNEtoTkw1V3V2UndpcEU3cFRuSTdNalZNMmY1CkZsYnVBQmhTTjAzZUxYaTRoVXIzb29XZko5VE9OQUxTZktwZTBxYmFpajMxbkRyUnNNVUd2U2JxU3FwbkpmWm8KSzJCRDdDMWNuVEU4clVYUU9ReUtRbW5SeTVKZkJwM0RMeGZRR0RmQ29uT0FHb05XT1RoWVNDbVJKQnFjbmY2UwoyUXNsZUNkWnZtUlRsM0JzdzFOd3l3Y0QzMW8zQWtNeFJENk9Iam9wUGN3MlkzVWZUVGViWFFNSnBtOFowOGlxCnRkaERQNWNpS2RRQzIxTGpsRTlTVHFVektwNUFKQ0hXU3RJbnNBdHhXbmRMVG4xZDVTN0lkckNGSWVCYWdsV0cKVWx5NXF2dlNDZW85SmpTZ09EeHFUR1F4eFB6RDIvaWMxdjBYcFFOR3N0bGNZOVFVK3grcjE0MyswcGZwK0lhegptdkF1c2MySnpuK2xKU2xvS2ZwUFFJZmpwR0cvM1FzRkhtaHB3SWRsNC9YUDV0THNzUUtDQVFFQTV0a1JEdFV6CktCNEQ4SnFXcG9IZGx1UTJPSjNlSjRCbElKem4wYUlHTVlFWGdaVmZaZFllTGU1TjhrZ21XTkIzZExzTFZmTDgKZmpTbWRsZU84emZRcTZLcEk0YVJVTjJ3dG14UlAwbUlRZFE0TkpxUEpqSXFVQU1TNjdiSmw1Y0NkVWVtMUJVcAp3b2J3c3JoN2NJYmJZMU9qeHpYYS8yTEdKcGRwNDBOTUtXYjd4NDhsVXpEc040NmVtSmZUcXlxUjB2WEgrWVFFCjhlWHh5NGFJR1A4cXFwblpKYkhPN2hUZE83NVBoRDEwM2dHU2UyTXE4ZEpuVWJ5bWNlbk9CZUIzTU1Yc3QvSTIKMG9mL0MxVEhrNVNWRzQwQnc1MVJhY2pteFRhaVA5RnI2SjBHcEFCOWEzSDcxWk40Z0VFRVhua0dGQ3pORFJ4TAorWE1VcjhvbFJIZDJrUUtDQVFFQTNUT1A2VFFjVWIrTHZIYzJxUVZnRkozeGJNa3ZxRFI2eUp2U2d6SjNXU250CmE2dnZzd0xTMGsxWnpaRDZTZ2d0SmxmcVN1RUZSNDJqNGVXNTNPendtZmZIaEN5RUM3di8wZEdtRmtDd3Z5eXIKN0FlVEpXc1ZGK1ZXNU91di9qVEpraysvV3FJeSs3ZTBlcW9GMUcwaWJubVZwQmQ0emFsMmR4aWswMkV1SVhpSwpvQS84WEJPeVZ4dG9nRnlZNmdFR2p0S2ZPTUdIL281NmFIVkhxNDIyRGdUbmV4a01YSDhwY2h4NkNJeXNrTGxFCnh4ZndSZ0s3Y1VGTW1iUExGcUdjWGIyMFp4N3dRRjJiR25hdkRIOThiRE5leVdsMmlOU1FNc1RmTDRFeklrclIKUjV6Ui96QTVzM241cThobUx6UEIvTGxMZE1MMmNYNFZ0Q1pVdzlBZDhRS0NBUUVBbHVkRXNGYU1KMmhmbVBQbApFUm1KbWU2Nnh3M2p3Qnk5ZnJFekZTVitPUFF6UW9FN3FGMXN3d2VwcW55aG5LTkJ3MnZXQUN4a0E3ZzFMTjBWCjFFWWpRVitHZzNPZklLYWFzdFZoMHlZbFRTc0dSdFRXU05pNE1pK2dPYmYyVmdMZ0YzeHNRTzFJckNIN3pFaXUKWUtPM1hGbTdrU2pTYk9uTHNFU0FjcEIyaEFZUEJxZTdkWU5nbHZ6RERlc0o4alZVdC92MDZsWHp5WkZRRzRScApDVFljVlFOWElMMzRFRWhSU3BHZ2QwaVpVZHJqUDRkVzlsZGROT0JHU2ViVng1K3hLby9ucTJOSmxSeFRpN3V5Cjd2Vk05NEtZcVovNExWZW9Demtvbk9Fd1VoSDcyazk3clRZSXN0ZkJDTTMzcGk0azNDRmhOWFhPOEZUYkxBTFAKazg4b0VRS0NBUUFGOVE2S0pFb2k5WHFvNzdqOElsWHRHRGZaU3kzS1pPZHRvYXl3dGRvNi80TVNaRVlIVnlzZwpXTTd6VjFVMlN6UVVGVWdORGpSYk1maFk3QnZ1VkQ5Q2xrYThTNHFlMmtoUWVVbjB6WGMxSHRuZWVISEJEem81Ck00YjhrVkJqRXo3ZWZ1RlRhb3plOUpxYXR4dURGaEZZVWxQeVlHTnpmbjNmUlQyako3bmJVdWpBMk0xZUdYV3oKSE56YW9DUEtJWTd3cDhGOEFOSk55NzZHTTZwamQyU1F5aGNGM0szVmkrTXMzSkY0eTNrV1NMY09lWm1SK1I3ZApOUG9BSmJSeGZwYThlNUJ4T29jVDVMRjVxL3FZNXBJT1ErL29rcnVMZ2RZRVdBTCt2NGNHQkdmUWV1dTQ2SzZWCkk5TFNpb29kK1ZIZklZcGpzYUI3ZS83UHBEeWlMV2V4QW9JQkFEdS9UTFZNZE03bjViVUc4MDFMWmxtUkM2MXYKc2JhK3MxVUp6Z0ZaSkNOZ05YNlJhN3VhallIUzZHcnlBK1RyYU9EaFQ2S0Fadjl1c3BRVjFFeHVHTHZTVU95YwpUT0NURExDZElwd2YyNmYyUzFma2MrZkN2ZVk1bzRyZmJoMWdnT2ZOM1BCbXM2MzR1cndCMkh0MStBdnBBQVRlClJZRytNRHpDUnVzem82WFlCajNOVTR4WkpENWsyRGZnUHZRR2xkTmd0ZkdaK09lSUI3WWJxakJQRUdoYlE1bnkKUyt5UDhsQTUvd2dtVUlKOGp3QzJKTVNxc0xPUnpBNEZ0K3ZwTWczZ0lac0lSenNYOTd4SlBUL1pvSXRMVlR2TwpNdDUwUm9SclBBS0lpMjBKRHdMeEJzTUlWaGMxbXQ4K1hieVJrSHhQR2Z2a1kvYnJaVTFhekhvSmQ2az0KLS0tLS1FTkQgUlNBIFBSSVZBVEUgS0VZLS0tLS0K
  apiServer:
    image: registry.k8s.io/kube-apiserver:v1.34.3
    extraArgs:
      enable-aggregator-routing: "true"
    certSANs:
      - 192.168.40.20
      - 127.0.0.1
      - 192.168.40.20
    disablePodSecurityPolicy: true
    auditPolicy:
      apiVersion: audit.k8s.io/v1
      kind: Policy
      rules:
        - level: Metadata
  controllerManager:
    image: registry.k8s.io/kube-controller-manager:v1.34.3
    extraArgs:
      bind-address: 0.0.0.0
  proxy:
    disabled: true
    image: registry.k8s.io/kube-proxy:v1.34.3
  scheduler:
    image: registry.k8s.io/kube-scheduler:v1.34.3
    extraArgs:
      bind-address: 0.0.0.0
  discovery:
    enabled: true
    registries:
      kubernetes:
        disabled: true
      service: {}
  etcd:
    ca:
      crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJmVENDQVNPZ0F3SUJBZ0lRQmRKUTd0M2xHUDVtdUdTSWNUTDRFakFLQmdncWhrak9QUVFEQWpBUE1RMHcKQ3dZRFZRUUtFd1JsZEdOa01CNFhEVEkxTURVek1UQXdNVGd5TlZvWERUTTFNRFV5T1RBd01UZ3lOVm93RHpFTgpNQXNHQTFVRUNoTUVaWFJqWkRCWk1CTUdCeXFHU000OUFnRUdDQ3FHU000OUF3RUhBMElBQkR2R1B3WmtPUitlCkd6Q3VmWHBNL3c5d3pSTVJzOXNCelZ4UW0xd3g2RGV0R203c08wbXZNNTRlL3UwL3l4UEI3QUIrRGxKVldGaGcKZzUzT0RJcUY5c3VqWVRCZk1BNEdBMVVkRHdFQi93UUVBd0lDaERBZEJnTlZIU1VFRmpBVUJnZ3JCZ0VGQlFjRApBUVlJS3dZQkJRVUhBd0l3RHdZRFZSMFRBUUgvQkFVd0F3RUIvekFkQmdOVkhRNEVGZ1FVcWhpeTJUd2ZBM3lYCnpqaFJ3QjQ4blF6ZG9lQXdDZ1lJS29aSXpqMEVBd0lEU0FBd1JRSWhBT0wzWFJuUWRXeFBBczJlNHpQRUlWMGsKUG9xRG5CbWZZNisvUEdkUVRwbG1BaUJBa3VqSWR3eGJ1RUs3bU5MeVlmRWM4ck1sSVdLSnhFUVljWXRpTDJkNwpEZz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
      key: LS0tLS1CRUdJTiBFQyBQUklWQVRFIEtFWS0tLS0tCk1IY0NBUUVFSUxLb0k2RjhTZVIzMTNpdi9DUnlGUkorejJMcG1nNHppeHZQUUM4cnBONlhvQW9HQ0NxR1NNNDkKQXdFSG9VUURRZ0FFTzhZL0JtUTVINTRiTUs1OWVrei9EM0RORXhHejJ3SE5YRkNiWERIb042MGFidXc3U2E4egpuaDcrN1QvTEU4SHNBSDRPVWxWWVdHQ0RuYzRNaW9YMnl3PT0KLS0tLS1FTkQgRUMgUFJJVkFURSBLRVktLS0tLQo=
    extraArgs:
      listen-metrics-urls: http://0.0.0.0:2381
    advertisedSubnets:
      - 192.168.40.0/24
  coreDNS:
    disabled: true
  allowSchedulingOnControlPlanes: true
